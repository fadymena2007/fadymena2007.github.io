#include <iostream>
#include <vector>
#include <cstdlib>
#include <ctime>
#include <iomanip>
using namespace std;
void printBoard(const vector<char>& board, const vector<bool>& revealed) {
    cout << "\n   1 2 3 4\n";
    for (int i = 0; i < 4; ++i) {
        cout << " " << i + 1 << " ";
        for (int j = 0; j < 4; ++j) {
            int index = i * 4 + j;
            cout << (revealed[index] ? board[index] : '*') << " ";
        }
        cout << endl;
    }
}
int main() {
    srand(time(0));
    vector<char> board = {'A', 'A', 'B', 'B', 'C', 'C', 'D', 'D', 'E', 'E', 'F', 'F', 'G', 'G', 'H', 'H'};
    vector<bool> revealed(16, false);
    for (int i = 0; i < board.size(); ++i) { int j = rand() % board.size(); swap(board[i], board[j]); }
    int attempts = 0, matchedPairs = 0;
    cout << "مرحباً بك في لعبة الذاكرة!\nالهدف هو إيجاد كل الأزواج المتطابقة." << endl;
    while (matchedPairs < 8) {
        printBoard(board, revealed);
        int row1, col1, row2, col2;
        cout << "\nاختر البطاقة الأولى (صف عمود): "; cin >> row1 >> col1;
        cout << "اختر البطاقة الثانية (صف عمود): "; cin >> row2 >> col2;
        if (row1 < 1 || row1 > 4 || col1 < 1 || col1 > 4 || row2 < 1 || row2 > 4 || col2 < 1 || col2 > 4) { cout << "مدخل غير صالح! يرجى اختيار أرقام بين 1 و 4." << endl; continue; }
        int index1 = (row1 - 1) * 4 + (col1 - 1), index2 = (row2 - 1) * 4 + (col2 - 1);
        if (index1 == index2 || revealed[index1] || revealed[index2]) { cout << "اختيار غير صالح! اختر بطاقتين مختلفتين وغير مكشوفتين." << endl; continue; }
        attempts++; revealed[index1] = true; revealed[index2] = true; printBoard(board, revealed);
        if (board[index1] == board[index2]) { cout << "\nممتاز! وجدت زوجاً متطابقاً." << endl; matchedPairs++; }
        else { cout << "\nللأسف، البطاقتان غير متطابقتين. سيتم إخفاؤهما." << endl; revealed[index1] = false; revealed[index2] = false; }
    }
    printBoard(board, revealed);
    cout << "\nتهانينا! لقد أنهيت اللعبة.\nعدد المحاولات: " << attempts << endl;
    return 0;
}